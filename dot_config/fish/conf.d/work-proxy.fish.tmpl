{{- $data := fromToml (include ".chezmoidata.toml") -}}
{{- $host := (index ($data.hosts | default (dict)) .chezmoi.hostname) | default (dict) -}}
{{- $roles := (index $host "roles") | default (list) -}}
{{- if has "work" $roles }}
# Work-specific proxy and certificate bundle configuration.

# Proxy endpoints (uppercase and lowercase variants).
set -gx HTTP_PROXY "http://localhost:3128"
set -gx HTTPS_PROXY "http://localhost:3128"
set -gx ALL_PROXY "http://localhost:3128"
set -gx http_proxy "http://localhost:3128"
set -gx https_proxy "http://localhost:3128"
set -gx all_proxy "http://localhost:3128"

# Certificate bundle shared across tooling.
set -gx CUSTOM_CERT_BUNDLE_PATH "/Users/Shared/ca_certs/bundle.pem"
set -gx AWS_CA_BUNDLE "$CUSTOM_CERT_BUNDLE_PATH"
set -gx CLOUDSDK_AUTH_CORE_CUSTOM_CA_CERTS_FILE "$CUSTOM_CERT_BUNDLE_PATH"
set -gx CURL_CA_BUNDLE "$CUSTOM_CERT_BUNDLE_PATH"
set -gx GIT_SSL_CAINFO "$CUSTOM_CERT_BUNDLE_PATH"
set -gx NODE_EXTRA_CA_CERTS "$CUSTOM_CERT_BUNDLE_PATH"
set -gx PIP_CERT "$CUSTOM_CERT_BUNDLE_PATH"
set -gx REQUESTS_CA_BUNDLE "$CUSTOM_CERT_BUNDLE_PATH"
set -gx SSL_CERT_FILE "$CUSTOM_CERT_BUNDLE_PATH"
{{- end }}
